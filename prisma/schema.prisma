generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum Service {
  lunch
  dinner
}

enum ReservationStatus {
  PENDING
  CONFIRMED
  CANCELED
}

enum ContactStatus {
  NEW
  READ
  REPLIED
}

model Customer {
  id           Int            @id @default(autoincrement())
  name         String
  email        String         @unique
  phone        String
  reservations Reservation[]
  createdAt    DateTime       @default(now())
}

model Reservation {
  id         Int               @id @default(autoincrement())
  customer   Customer          @relation(fields: [customerId], references: [id])
  customerId Int
  date       DateTime
  time       String            // "HH:mm"
  service    Service
  people     Int
  notes      String?
  status     ReservationStatus @default(PENDING)
  createdAt  DateTime          @default(now())

  @@index([date, service, time])
  @@unique([date, service, time])
}

model NewsletterSubscriber {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  createdAt DateTime @default(now())
}

model Contact {
  id        Int           @id @default(autoincrement())
  name      String
  email     String
  subject   String
  message   String        @db.Text
  status    ContactStatus @default(NEW)
  response  String?       @db.Text
  createdAt DateTime      @default(now())
  updatedAt DateTime      @updatedAt

  @@index([status, createdAt])
}


